<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
        <style>
            #table{
                width: max-content;
            }
            #b3 a{
                text-decoration: none;
                color: white;
            }
            #buttons{
                width: max-content;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
        $(document).ready(function(){
            $("#table").hide();
            $("#table1").hide();
            $("#b1").click(function(){
                $("#table").show();
                $("#table td").remove();
                $("#table1").hide();
                $.getJSON({url:"http://localhost:5500/covid19/showdetails",success:function(resp){
                    var table = document.getElementById("table");
                    for(i = 0; i < resp.length; i++){
                        var row = table.insertRow(i+1);
                        var cell0 = row.insertCell(0);
                        var cell1 = row.insertCell(1);
                        var cell2 = row.insertCell(2);
                        var cell3 = row.insertCell(3);
                        var cell4 = row.insertCell(4);
                        cell0.innerHTML = resp[i].District_Name;
                        cell1.innerHTML = resp[i].Date;
                        cell2.innerHTML = resp[i].Infected;
                        cell3.innerHTML = resp[i].Recovered;
                        cell4.innerHTML = resp[i].Vaccinated;
                    }
                }});
            });
            $("#bs1").click(function(){
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort names - 
                    resp.sort((a, b) => {
                        const nameA = a.District_Name.toUpperCase();
                        const nameB = b.District_Name.toUpperCase();
                        if(nameA < nameB){
                            return -1;
                        }
                        if(nameA > nameB){
                            return 1;
                        }
                        return 0;
                    });              
                    var table = document.getElementById("table");                    
                    for(j = 0; j < resp.length ; j++){
                        cell0 = table.rows[j+1].cells[0];
                        cell1 = table.rows[j+1].cells[1];
                        cell2 = table.rows[j+1].cells[2];
                        cell3 = table.rows[j+1].cells[3];
                        cell4 = table.rows[j+1].cells[4];
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });
            $("#bs2").click(function(){
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort Date - 
                    resp.sort((a, b) => {
                        const nameA = a.Date.toUpperCase();
                        const nameB = b.Date.toUpperCase();
                        if(nameA < nameB){
                            return -1;
                        }
                        if(nameA > nameB){
                            return 1;
                        }
                        return 0;
                    });              
                    var table = document.getElementById("table");                    
                    for(j = 0; j < resp.length ; j++){
                        cell0 = table.rows[j+1].cells[0];
                        cell1 = table.rows[j+1].cells[1];
                        cell2 = table.rows[j+1].cells[2];
                        cell3 = table.rows[j+1].cells[3];
                        cell4 = table.rows[j+1].cells[4];
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });
            $("#bs3").click(function(){
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort Infected - 
                    resp.sort((a, b) => a.Infected - b.Infected);              
                    var table = document.getElementById("table");                    
                    for(j = 0; j < resp.length ; j++){
                        cell0 = table.rows[j+1].cells[0];
                        cell1 = table.rows[j+1].cells[1];
                        cell2 = table.rows[j+1].cells[2];
                        cell3 = table.rows[j+1].cells[3];
                        cell4 = table.rows[j+1].cells[4];
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });
            $("#bs4").click(function(){
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort Recovered - 
                    resp.sort((a, b) => a.Recovered - b.Recovered);              
                    var table = document.getElementById("table");                    
                    for(j = 0; j < resp.length ; j++){
                        cell0 = table.rows[j+1].cells[0];
                        cell1 = table.rows[j+1].cells[1];
                        cell2 = table.rows[j+1].cells[2];
                        cell3 = table.rows[j+1].cells[3];
                        cell4 = table.rows[j+1].cells[4];
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });
            $("#bs5").click(function(){
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort Vaccinated - 
                    resp.sort((a, b) => a.Vaccinated - b.Vaccinated);              
                    var table = document.getElementById("table");                    
                    for(j = 0; j < resp.length ; j++){
                        cell0 = table.rows[j+1].cells[0];
                        cell1 = table.rows[j+1].cells[1];
                        cell2 = table.rows[j+1].cells[2];
                        cell3 = table.rows[j+1].cells[3];
                        cell4 = table.rows[j+1].cells[4];
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });        
            $("#b2").click(function(){
                $("#table").hide();
                $("#table1").show();
                $("#table1 td").remove();
                $.getJSON({url: "http://localhost:5500/covid19/showdetails",success:function(resp){
                    // Function to sort Vaccinated - 
                    resp.sort((a, b) => b.Vaccinated - a.Vaccinated);              
                    var table = document.getElementById("table1");                    
                    for(j = 0; j < 10 ; j++){
                        var row = table.insertRow(j+1);
                        var cell0 = row.insertCell(0);
                        var cell1 = row.insertCell(1);
                        var cell2 = row.insertCell(2);
                        var cell3 = row.insertCell(3);
                        var cell4 = row.insertCell(4);
                        cell0.innerHTML = resp[j].District_Name;
                        cell1.innerHTML = resp[j].Date;
                        cell2.innerHTML = resp[j].Infected;
                        cell3.innerHTML = resp[j].Recovered;
                        cell4.innerHTML = resp[j].Vaccinated;
                    }
                }});
            });            
        });
    </script>
    </head>
    <body>
        <h1> COVID19 Data Manipulation using JS, JQuery, AJAX, NodeJS </h1>
        <center>
            <div id="buttons">
                <button id="b1"> Data display to table </button>
                <button id="b2"> Click here to view the top 10 vaccinated districts </button>
                <button id="b3"><a href="page2.html"> Data insertion </a></button>
            </div>
        </center>
        <center>
            <table id="table">
                <tr>
                    <th id="bs1"> District Name </th>
                    <th id="bs2"> Date </th>
                    <th id="bs3"> Infected </th>
                    <th id="bs4"> Recovered </th>
                    <th id="bs5"> Vaccinated </th>
                </tr>
            </table>
            <table id="table1">
                <tr>
                    <th> District Name </th>
                    <th> Date </th>
                    <th> Infected </th>
                    <th> Recovered </th>
                    <th> Vaccinated </th>
                </tr>
            </table>
        </center>        
    </body>
</html>
